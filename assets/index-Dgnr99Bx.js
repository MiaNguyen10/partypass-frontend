import{j as e,r as t,a as i}from"./react-BRShYvXP.js";import{c as a}from"./react-dom-BzNS-2fJ.js";import{u as s,a as r,P as n}from"./react-redux-C8TfAz5h.js";import{u as l,N as o,O as d,a as c,L as u,b as m,c as p,R as h}from"./react-router-88PNiHV-.js";import{s as x,B as f,L as g,a as j,b as v,C as b,A as _,T as y,I as k,M as w,c as C,D as N,d as S,e as q,f as P,g as R,u as I,h as A,i as E,j as T,k as W,l as D,m as V,n as L,t as $,o as F,p as U,q as z,P as Y,r as H,v as M,w as O,x as B,S as G,y as J,R as K,E as Z,z as Q,F as X,G as ee,H as te,J as ie,V as ae,K as se,N as re,O as ne,Q as le,U as oe,W as de,X as ce,Y as ue,Z as me,_ as pe}from"./@mui-DbvDws7r.js";import{P as he}from"./prop-types-B81A7O0o.js";import{c as xe,a as fe,b as ge}from"./@reduxjs-BjRtCtrI.js";import{a as je}from"./axios-D3yCfJ5s.js";import{o as ve}from"./@hookform-B68yEsly.js";import{C as be,u as _e,F as ye}from"./react-hook-form-fRayFuR3.js";import{c as ke,a as we,b as Ce,d as Ne,e as Se,f as qe,g as Pe}from"./yup-p3irPI09.js";import{u as Re,n as Ie}from"./@emotion-bnW1rYRx.js";import{d as Ae}from"./dayjs-BtAI-RA9.js";import"./cookie-Bxb2uFw8.js";import"./scheduler-CQYGjB7w.js";import"./use-sync-external-store-CDx8uaxf.js";import"./react-is-Dbu_OFBB.js";import"./clsx-BeLtu-UY.js";import"./react-transition-group-DDEVBYAv.js";import"./@babel-CcRS86ir.js";import"./dom-helpers-BmWjwk_c.js";import"./@popperjs-_iZV8NMP.js";import"./redux-C5Huw2aR.js";import"./immer-DH0LoexQ.js";import"./redux-thunk-B3S1iNVp.js";import"./property-expr-DJkEfuIG.js";import"./tiny-case-CbcIhwGY.js";import"./toposort-DsYyS2xV.js";import"./hoist-non-react-statics-CPjjL7Uz.js";import"./stylis-CWkYTb2H.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const i of e)if("childList"===i.type)for(const e of i.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const Ee="/login",Te="/",We="/tickets",De="/tickets/:id",Ve="/tickets/:id/edit",Le="/tickets/add",$e="/users",Fe="/users/:id",Ue="/users/:id/edit",ze="/users/add",Ye="/institutions",He="/institutions/:id",Me="/institutions/:id/edit",Oe="/institutions/add",Be="/lockers",Ge="/lockers/:id/edit",Je="/lockers/add",Ke="/access-denied",Ze=()=>{const t=l();return sessionStorage.getItem("token")?e.jsx(d,{}):e.jsx(o,{to:`${Ee}`,state:{from:t},replace:!0})},Qe=()=>e.jsx("section",{className:"bg-white dark:bg-gray-900",children:e.jsx("div",{className:"py-8 px-4 mx-auto max-w-screen-xl lg:py-16 lg:px-6",children:e.jsxs("div",{className:"mx-auto max-w-screen-sm text-center",children:[e.jsx("p",{className:"mb-4 text-3xl tracking-tight font-bold text-gray-900 md:text-4xl dark:text-white",children:"Access Denied"}),e.jsx("p",{className:"mb-4 text-lg font-light text-gray-500 dark:text-gray-400",children:"You do not have permission to view this page."}),e.jsx("a",{href:"/",className:"inline-flex text-gray-900 bg-primary-600 hover:bg-primary-800 focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:focus:ring-primary-900 my-4",children:"Back to Homepage"})]})})}),Xe=x(f)((()=>({backgroundColor:"transparent",backgroundImage:"linear-gradient(#fff, #f5f5fa)",border:"0 solid #003dff",borderRadius:"9999px",boxShadow:"rgba(37, 44, 97, .15) 0 4px 11px 0, rgba(93, 100, 148, .2) 0 1px 3px 0",boxSizing:"border-box",color:"#484c7a",cursor:"pointer",display:"inline-block",fontFamily:'Hind, system-ui, BlinkMacSystemFont, -apple-system, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif',fontWeight:600,margin:"4px",padding:"16px 24px",textAlign:"center",textDecoration:"inherit",textWrap:"nowrap",transition:"all .2s ease-out",transitionBehavior:"normal",whiteSpaceCollapse:"collapse",lineHeight:1.15,"&:hover":{boxShadow:"rgba(37, 44, 97, .15) 0 8px 22px 0, rgba(93, 100, 148, .2) 0 4px 6px 0"},"&:disabled":{cursor:"not-allowed",opacity:.5},"@media (min-width: 576px)":{paddingBottom:"10px",paddingTop:"10px"}}))),et={image:["jpg","gif","png","jpeg","svg","webp"]},tt=[{id:0,value:"App User"},{id:1,value:"System Admin"},{id:2,value:"Institutional Admin"},{id:3,value:"Institutional Staff"}],it=[{id:0,value:"Disabled"},{id:1,value:"Active"}],at=[{value:"Active"},{value:"Disabled"}],st="idle",rt="pending",nt="succeeded",lt="failed",ot=je.create({baseURL:"https://partypass-server.onrender.com",headers:{"Content-Type":"application/json",Accept:"*/*"}});ot.interceptors.request.use((e=>{const t=sessionStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e}),(e=>Promise.reject(e))),ot.interceptors.response.use((e=>e),(e=>(e.response?console.error("Response Error:",e.response.data):e.request?console.error("No response received:",e.request):console.error("Request Error:",e.message),Promise.reject(e))));const dt=xe("auth/authenticate",(async({email:e,password:t},{rejectWithValue:i})=>{try{return(await ot.post("/api/v1/users/login",{email:e,password:t})).data}catch(a){if(!a.response)throw a;return i(a.response.data)}})),ct=fe({name:"auth",initialState:{isAuthenticated:!1,user:null,loading:st,error:null},reducers:{logout:e=>{e.isAuthenticated=!1,e.user=null,sessionStorage.removeItem("token")}},extraReducers:e=>{e.addCase(dt.pending,(e=>{e.loading=rt})).addCase(dt.fulfilled,((e,t)=>{e.loading=nt,e.isAuthenticated=!0,e.user=t.payload,e.error=null})).addCase(dt.rejected,((e,t)=>{e.loading=lt,e.isAuthenticated=!1,e.user=null,e.error=t.error.message}))}}),{logout:ut}=ct.actions,mt=ct.reducer,pt=x("main")((({theme:e})=>({flexGrow:1,padding:e.spacing(3),marginLeft:10,transition:e.transitions.create(["margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),"@media (max-width: 1280px)":{marginLeft:0}}))),ht=x("nav")((()=>({width:200,flexShrink:0,"@media (max-width: 1280px)":{width:0}}))),xt=({children:i})=>{const a=c(),r=s(),[n,l]=t.useState(!1),o=()=>{l(!n)},d=e.jsx("div",{children:e.jsx(g,{children:["Home","Tickets","Users","Institutions","Lockers"].map((t=>e.jsx(j,{component:u,to:"Home"===t?"/":`/${t.toLowerCase()}`,children:e.jsx(v,{primary:t})},t)))})});return e.jsxs("div",{className:"flex h-screen",children:[e.jsx(b,{}),e.jsx(_,{position:"fixed",style:{zIndex:1201},children:e.jsx(y,{children:e.jsxs("div",{className:"flex justify-between w-full",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(k,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:o,sx:{display:{xl:"none"}},children:e.jsx(w,{})}),e.jsx(C,{variant:"h6",noWrap:!0,children:"Party Pass Admin Page"})]}),e.jsx(Xe,{onClick:()=>{r(ut()),a(Ee)},children:"Log out"})]})})}),e.jsxs(ht,{children:[e.jsxs(N,{variant:"temporary",open:n,onClose:o,className:"xl:hidden",ModalProps:{keepMounted:!0},PaperProps:{style:{width:200}},children:[e.jsx(y,{}),d]}),e.jsxs(N,{variant:"permanent",className:"hidden xl:block",open:!0,PaperProps:{style:{width:200}},children:[e.jsx(y,{}),d]})]}),e.jsxs(pt,{children:[e.jsx(y,{}),i]})]})};xt.propTypes={children:he.node.isRequired};const ft=()=>e.jsx(e.Fragment,{children:e.jsx(xt,{children:e.jsx("h1",{children:"Home Page"})})}),gt=({files:t,width:a,height:s})=>{const[r,n]=i.useState([]);return i.useEffect((()=>{if(!Array.isArray(t))return void console.error("files prop is not an array:",t);const e=[];t.forEach((i=>{const a=new FileReader;a.readAsDataURL(i),a.onload=()=>{const s=i&&"image"===i.type.split("/")[0];e.push(s?a.result:"/default.svg"),e.length===t.length&&n(e)}}))}),[t]),e.jsx("div",{className:"flex flex-row flex-wrap",children:r.map(((t,i)=>e.jsx("div",{className:"px-2 pb-2 relative",children:e.jsx("img",{src:t,alt:"Preview",width:a,height:s})},i)))})};function jt({mapUrl:t}){return e.jsx(S,{className:"w-full h-64 md:h-96 overflow-hidden rounded-lg shadow-lg",sx:{borderRadius:2,border:1,borderColor:"grey.300",mt:2},children:e.jsx("iframe",{title:"Map",src:t,className:"w-full h-full",allowFullScreen:!0,loading:"lazy"})})}gt.propTypes={files:he.arrayOf(he.instanceOf(File)).isRequired,width:he.oneOfType([he.number,he.string]),height:he.oneOfType([he.number,he.string]),handleRemove:he.func},jt.propTypes={mapUrl:he.string.isRequired};const vt=({handleSubmit:t,onSubmit:i,control:a,formErrors:s,watch:r,setValue:n,fileInputRef:l})=>{const o=r("cover_photo"),d=et["image"].map((e=>`.${e}`)).toString();return e.jsxs("form",{onSubmit:t(i),className:"grid gap-4 py-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(be,{name:"name",control:a,render:({field:{onChange:t,value:i}})=>{var a;return e.jsx(q,{value:i,onChange:t,error:!!(null==s?void 0:s.name),helperText:null==(a=null==s?void 0:s.name)?void 0:a.message,label:"Institution Name",variant:"outlined"})}}),e.jsx(be,{name:"email",control:a,render:({field:{onChange:t,value:i}})=>{var a;return e.jsx(q,{value:i,onChange:t,error:!!(null==s?void 0:s.email),helperText:null==(a=null==s?void 0:s.email)?void 0:a.message,label:"Email",variant:"outlined"})}})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(be,{name:"phone",control:a,render:({field:{onChange:t,value:i}})=>{var a;return e.jsx(q,{value:i,onChange:t,error:!!(null==s?void 0:s.phone),helperText:null==(a=null==s?void 0:s.phone)?void 0:a.message,label:"Phone",variant:"outlined"})}}),e.jsx(be,{name:"address",control:a,render:({field:{onChange:t,value:i}})=>{var a;return e.jsx(q,{value:i,onChange:t,error:!!(null==s?void 0:s.address),helperText:null==(a=null==s?void 0:s.address)?void 0:a.message,label:"Address",variant:"outlined"})}})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(jt,{mapUrl:r("map_location")}),e.jsxs("div",{className:"flex flex-col space-y-2",children:[e.jsx(be,{name:"map_location",control:a,render:({field:{onChange:t,value:i}})=>{var a;return e.jsx(q,{value:i,onChange:t,error:!!(null==s?void 0:s.map_location),helperText:null==(a=null==s?void 0:s.map_location)?void 0:a.message,label:"Map location",variant:"outlined",multiline:!0})}}),e.jsx(f,{variant:"contained",onClick:()=>(e=>{if(e.startsWith("http")||!e.includes("<iframe"))return e;const t=e.match(/src="([^"]+)"/);n("map_location",t?t[1]:null)})(r("map_location")),children:"Extract URL"})]})]}),e.jsx(be,{name:"details",control:a,render:({field:{onChange:t,value:i}})=>{var a;return e.jsx(q,{value:i,onChange:t,error:!!(null==s?void 0:s.details),helperText:null==(a=null==s?void 0:s.details)?void 0:a.message,label:"Detail",variant:"outlined",multiline:!0})}}),e.jsx(be,{name:"status",control:a,render:({field:{onChange:t,value:i}})=>{var a;return e.jsx(q,{select:!0,value:i,onChange:t,error:!!(null==s?void 0:s.status),helperText:null==(a=null==s?void 0:s.status)?void 0:a.message,label:"Institution status",variant:"outlined",children:it.map((t=>e.jsx(P,{value:t.value,children:t.value},t.id)))})}}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{className:"button label",htmlFor:"cover_photo",children:e.jsxs("span",{children:["Upload cover photo (Validate file: [",d,"])"]})}),e.jsx(be,{name:"cover_photo",control:a,render:({field:t})=>e.jsx("input",{id:"cover_photo",type:"file",accept:d,ref:l,onChange:e=>{const i=Array.from(e.target.files);t.onChange(i),n("cover_photo",i)}})}),o&&(Array.isArray(o)&&o.length>0?e.jsx(gt,{className:{margin:"auto"},width:300,height:"auto",files:o}):e.jsx("img",{src:r("cover_photo"),alt:"cover_photo",width:300,height:"auto"}))]}),e.jsx("div",{className:"grid gap-2",children:e.jsx(be,{name:"video_link",control:a,render:({field:{onChange:t,value:i}})=>{var a;return e.jsx(q,{label:"Video link",variant:"outlined",value:i,onChange:e=>t(e.target.value),error:!!(null==s?void 0:s.video_link),helperText:null==(a=null==s?void 0:s.video_link)?void 0:a.message})}})}),e.jsx(f,{type:"submit",variant:"contained",children:"Save institution"})]})};vt.propTypes={handleSubmit:he.func.isRequired,onSubmit:he.func.isRequired,control:he.object.isRequired,formErrors:he.object,watch:he.func.isRequired,setValue:he.func.isRequired,fileInputRef:he.object.isRequired};const bt=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{6,}$/i,_t=ke().shape({name:we().required("Name is required"),email:we().matches(/^[\w-.]+@([\w-]+\.)+[\w-]{2,4}$/i,"Email is not valid").required("Email is required"),phone:we().matches(/^\d{10,14}$/i,"Phone is not valid").required("Phone is required"),address:we().required("Address is required"),map_location:we(),details:we(),video_link:we(),status:we().required("Status is required")}),yt=je.create({baseURL:"https://partypass-server.onrender.com",headers:{"Content-Type":"multipart/form-data",Accept:"*/*"}});yt.interceptors.request.use((e=>{const t=sessionStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e}),(e=>Promise.reject(e))),yt.interceptors.response.use((e=>e),(e=>(e.response?console.error("Response Error:",e.response.data):e.request?console.error("No response received:",e.request):console.error("Request Error:",e.message),Promise.reject(e))));const kt=xe("institution/getInstitutionList",(async(e,{rejectWithValue:t})=>{try{return(await ot.get("/api/v1/institute/list")).data}catch(i){if(!i.response)throw i;return t(i.response.data)}})),wt=xe("institution/getInstitutionById",(async(e,{rejectWithValue:t})=>{try{return(await ot.get(`/api/v1/institute/${e}`)).data}catch(i){if(!i.response)throw i;return t(i.response.data)}})),Ct=xe("institution/updateInstitution",(async({institutionData:e,institution_id:t},{rejectWithValue:i})=>{try{return(await yt.patch(`/api/v1/institute/update/${t}`,e)).data}catch(a){if(!a.response)throw a;return i(a.response.data)}})),Nt=xe("institution/createInstitution",(async({institutionData:e},{rejectWithValue:t})=>{try{return(await yt.post("/api/v1/institute/create",e)).data}catch(i){if(!i.response)throw i;return t(i.response.data)}})),St=xe("institution/deleteInstitution",(async(e,{rejectWithValue:t})=>{try{return(await ot.delete(`/api/v1/institute/delete/${e}`)).data}catch(i){if(!i.response)throw i;return t(i.response.data)}})),qt=()=>{const i=c(),a=s(),r=t.useRef(null),{handleSubmit:n,control:l,formState:{errors:o},reset:d,setValue:u,watch:m}=_e({resolver:ve(_t),defaultValues:{name:"",email:"",phone:"",address:"",map_location:"",details:"",cover_photo:"",video_link:"",status:""}});return e.jsxs(xt,{children:[e.jsxs("div",{className:"flex flex-row justify-between",children:[e.jsx(C,{variant:"h5",children:"Add institution"}),e.jsx("p",{className:"italic text-cyan-600 cursor-pointer text-sm",onClick:()=>i(Ye),children:"Go back Institutions page"})]}),e.jsx(vt,{handleSubmit:n,onSubmit:e=>{const t=new FormData;t.append("name",e.name),t.append("email",e.email),t.append("phone",e.phone),t.append("address",e.address),t.append("map_location",e.map_location),t.append("details",e.details),t.append("video_link",e.video_link),t.append("status","Active"===e.status?1:0),e.cover_photo&&e.cover_photo[0]&&t.append("cover_photo",e.cover_photo[0]),a(Nt({institutionData:t})).then((()=>{r.current&&(r.current.value=null)})),d()},control:l,formErrors:o,watch:m,setValue:u,fileInputRef:r})]})},Pt=fe({name:"institution",initialState:{institutions:[],institution:{institution_id:"",name:"",email:"",phone:"",address:"",map_location:"",status:"",details:"",cover_photo:"",video_link:""},loading:st,error:null},reducers:{},extraReducers:e=>{e.addCase(kt.pending,(e=>{e.loading=rt})).addCase(kt.fulfilled,((e,t)=>{e.loading=nt,e.institutions=t.payload.map((e=>({institution_id:e.institution_id,name:e.name,email:e.email,phone:e.phone,address:e.address,map_location:e.map_location,status:e.status,details:e.details,cover_photo:e.cover_photo,video_link:e.video_link}))),e.error=null})).addCase(kt.rejected,((e,t)=>{e.loading=lt,e.institutions=[],e.error=t.error.message})).addCase(wt.pending,(e=>{e.loading=rt})).addCase(wt.fulfilled,((e,t)=>{e.loading=nt,e.institution={...e.institution,...t.payload},e.error=null})).addCase(wt.rejected,((e,t)=>{e.loading=lt,e.error=t.error.message})).addCase(Ct.pending,(e=>{e.loading=rt})).addCase(Ct.fulfilled,((e,t)=>{e.loading=nt,e.institutions=e.institutions.map((e=>e.id===t.payload.institution_id?t.payload:e)),e.error=null})).addCase(Ct.rejected,((e,t)=>{e.loading=lt,e.error=t.error.message})).addCase(Nt.pending,(e=>{e.loading=rt})).addCase(Nt.fulfilled,((e,t)=>{e.loading=nt,e.institutions.push(t.payload),e.error=null})).addCase(Nt.rejected,((e,t)=>{e.loading=lt,e.error=t.error.message})).addCase(St.pending,(e=>{e.loading=rt})).addCase(St.fulfilled,((e,t)=>{e.loading=nt,e.institutions=e.institutions.filter((e=>e.id!==t.payload.institution_id)),e.error=null})).addCase(St.rejected,((e,t)=>{e.loading=lt,e.error=t.error.message}))}}).reducer,Rt=e=>e.institution.institutions,It=e=>e.institution.institution,At=()=>{const{id:i}=m(),a=c(),n=s(),l=r(It),o=t.useRef(null);t.useEffect((()=>{n(wt(i))}),[n,i]);const{handleSubmit:d,control:u,formState:{errors:p},reset:h,watch:x,setValue:f}=_e({resolver:ve(_t),defaultValues:{name:"",email:"",phone:"",address:"",map_location:"",details:"",cover_photo:"",video_link:"",status:""}});t.useEffect((()=>{l&&h({name:l.name||"",email:l.email||"",phone:l.phone||"",address:l.address||"",map_location:l.map_location||"",details:l.details||"",cover_photo:l.cover_photo||"",video_link:l.video_link||"",status:0===l.status?it[0].value:it[1].value||""})}),[l]);return e.jsxs(xt,{children:[e.jsxs("div",{className:"flex flex-row justify-between",children:[e.jsx(C,{variant:"h5",children:"Edit ticket"}),e.jsx("p",{className:"italic text-cyan-600 cursor-pointer text-sm",onClick:()=>a(Ye),children:"Go back Institutions page"})]}),e.jsx(vt,{handleSubmit:d,onSubmit:e=>{const t=new FormData;t.append("name",e.name),t.append("email",e.email),t.append("phone",e.phone),t.append("address",e.address),t.append("map_location",e.map_location),t.append("details",e.details),t.append("video_link",e.video_link),t.append("status","Active"===e.status?1:0),e.cover_photo&&e.cover_photo[0]&&t.append("cover_photo",e.cover_photo[0]),n(Ct({institutionData:t,institution_id:i})).then((()=>{n(wt(i)),o.current&&(o.current.value=null)})).catch((e=>{console.error("Update Error:",e)}))},control:u,formErrors:p,watch:x,setValue:f,fileInputRef:o})]})},Et=()=>{const i=c(),a=s(),{id:n}=m(),l=r(It);return t.useEffect((()=>{a(wt(n))}),[a,n]),e.jsxs(xt,{children:[e.jsxs("div",{className:"flex flex-row justify-between",children:[e.jsx(C,{variant:"h5",children:"Institution details"}),e.jsxs("div",{className:"flex flex-row",children:[e.jsx("p",{className:"italic text-cyan-600 cursor-pointer text-sm",onClick:()=>i(Ye),children:"Go back Institutions page"}),e.jsx("p",{className:"px-3",children:" | "}),e.jsx("p",{className:"italic text-cyan-600 cursor-pointer text-sm",onClick:()=>i(`${Ye}/${n}/edit`),children:"Edit"})]})]}),e.jsxs("div",{className:"grid gap-4 py-3",children:[e.jsxs("div",{className:"flex flex-wrap",children:[e.jsx("p",{className:"font-bold",children:"Institution name:"}),e.jsx("p",{className:"px-2",children:l.name})]}),e.jsxs("div",{className:"flex flex-wrap",children:[e.jsx("p",{className:"font-bold",children:"Email:"}),e.jsx("p",{className:"px-2",children:l.email})]}),e.jsxs("div",{className:"flex flex-wrap",children:[e.jsx("p",{className:"font-bold",children:"Phone:"}),e.jsx("p",{className:"px-2",children:l.phone})]}),e.jsxs("div",{className:"flex flex-wrap",children:[e.jsx("p",{className:"font-bold",children:"Address:"}),e.jsx("p",{className:"px-2",children:l.address})]}),e.jsxs("div",{className:"flex flex-wrap",children:[e.jsx("p",{className:"font-bold",children:"Details:"}),e.jsx("p",{className:"px-2",children:l.details})]}),e.jsxs("div",{className:"flex flex-wrap",children:[e.jsx("p",{className:"font-bold",children:"Status:"}),e.jsx("p",{className:"px-2",children:0===l.status?it[0].value:it[1].value})]}),e.jsxs("div",{className:"flex flex-wrap",children:[e.jsx("p",{className:"font-bold",children:"Map location:"}),l.map_location?e.jsx(jt,{mapUrl:l.map_location}):e.jsx("p",{className:"px-2",children:"No map location"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Images:"}),e.jsx("div",{className:"px-2",children:e.jsx("img",{src:l.cover_photo,alt:"cover_photo",width:300,height:"auto"})})]}),e.jsxs("div",{className:"flex flex-wrap",children:[e.jsx("p",{className:"font-bold",children:"Video link:"}),e.jsx("div",{className:"px-2 flex flex-col",children:l.video_link?e.jsx(R,{href:l.video_link,underline:"hover",target:"_blank",rel:"noopener noreferrer",children:e.jsx("p",{className:"text-cyan-600 italic font-bold",children:"Press here to open video"})}):e.jsx("p",{children:"No video"})})]})]})]})},Tt=x(f)((()=>({height:"35px",boxShadow:"rgba(60, 64, 67, 0.3) 0px 1px 2px 0px, rgba(60, 64, 67, 0.15) 0px 1px 3px 1px"}))),Wt=xe("ticket/getTicketList",(async(e,{rejectWithValue:t})=>{try{return(await ot.get("/api/v1/ticket/list")).data}catch(i){if(!i.response)throw i;return t(i.response.data)}})),Dt=xe("ticket/getTicketById",(async(e,{rejectWithValue:t})=>{try{return(await ot.get(`/api/v1/ticket/${e}`)).data}catch(i){if(!i.response)throw i;return t(i.response.data)}})),Vt=xe("ticket/updateTicket",(async({ticket_id:e,ticketData:t},{rejectWithValue:i})=>{try{return(await ot.patch(`/api/v1/ticket/update/${e}`,t)).data}catch(a){if(!a.response)throw a;return i(a.response.data)}})),Lt=xe("ticket/createTicket",(async(e,{rejectWithValue:t})=>{try{return(await ot.post("/api/v1/ticket/create",e)).data}catch(i){if(!i.response)throw i;return t(i.response.data)}})),$t=xe("ticket/deleteTicket",(async(e,{rejectWithValue:t})=>{try{return(await ot.delete(`/api/v1/ticket/delete/${e}`)).data}catch(i){if(!i.response)throw i;return t(i.response.data)}})),Ft=({atr:t,open:a,setOpen:r,ticketId:n,setTicketId:l,institutionId:o,setInstitutionId:d})=>{const c=Re(),u=I(c.breakpoints.down("md")),m=s(),p=()=>{r(!1)};return e.jsx(i.Fragment,{children:e.jsxs(A,{fullScreen:u,open:a,onClose:p,"aria-labelledby":"responsive-dialog-title",children:[e.jsx(E,{children:e.jsx(T,{children:e.jsxs(C,{className:"text-black font-semibold",children:["Are you sure you want to delete this ",t,"?"]})})}),e.jsxs(W,{children:[e.jsx(f,{autoFocus:!0,onClick:p,children:"Cancel"}),e.jsx(f,{onClick:()=>{switch(t){case"ticket":m($t(n)),m(Wt()),r(!1),l(null);break;case"organization":m(St(o)),m(kt()),r(!1),d(null)}},autoFocus:!0,children:"Confirm"})]})]})})};Ft.propTypes={atr:he.string.isRequired,open:he.bool.isRequired,setOpen:he.func.isRequired,ticketId:he.number,setTicketId:he.func,institutionId:he.number,setInstitutionId:he.func};const Ut=x(P)({padding:0,"&:hover":{backgroundColor:"transparent"}}),zt=x(D)({display:"flex",flexDirection:"row"}),Yt=({submenu:t})=>e.jsx(zt,{children:null==t?void 0:t.map(((t,i)=>e.jsx(Ut,{disableRipple:!0,onClick:(null==t?void 0:t.link)?null==t?void 0:t.link:(null==t?void 0:t.onClick)||null,children:e.jsx(V,{children:t.icon})},`table-item-${i}`)))});Yt.propTypes={submenu:he.arrayOf(he.shape({icon:he.node,link:he.func,onClick:he.func}))};const Ht=Ie(L)((({theme:e})=>({[`&.${$.head}`]:{backgroundColor:e.palette.common.black,color:e.palette.common.white},[`&.${$.body}`]:{fontSize:14}}))),Mt=({headCells:t})=>e.jsx(F,{children:e.jsx(U,{children:t.map((t=>e.jsx(Ht,{align:t.align||"left",style:{minWidth:t.minWidth},children:t.label},t.id)))})});Mt.propTypes={headCells:he.arrayOf(he.shape({id:he.string.isRequired,align:he.string,minWidth:he.number,label:he.string.isRequired})).isRequired};const Ot=Ie(L)((({theme:e})=>({[`&.${$.head}`]:{backgroundColor:e.palette.common.black,color:e.palette.common.white},[`&.${$.body}`]:{fontSize:14}}))),Bt=Ie(U)((({theme:e})=>({"&:nth-of-type(odd)":{backgroundColor:e.palette.action.hover},"&:last-child td, &:last-child th":{border:0}}))),Gt=({rows:t,page:i,rowsPerPage:a,headCells:s})=>e.jsx(z,{children:t.slice(i*a,i*a+a).map(((t,i)=>e.jsx(Bt,{hover:!0,role:"checkbox",tabIndex:-1,children:s.map((i=>{const a=t[i.id];return e.jsx(Ot,{align:i.align,children:i.format&&"number"==typeof a?i.format(a):a},i.id)}))},i)))});Gt.propTypes={rows:he.array.isRequired,page:he.number.isRequired,rowsPerPage:he.number.isRequired,headCells:he.array.isRequired};const Jt=({headCells:t,rows:i,page:a,rowsPerPage:s,handleChangePage:r,handleChangeRowsPerPage:n})=>e.jsxs(Y,{sx:{width:"100%",overflow:"hidden"},children:[e.jsx(H,{component:Y,children:e.jsxs(M,{sx:{minWidth:700,border:"1px solid #e0e0e0"},stickyHeader:!0,"aria-label":"sticky table",children:[e.jsx(Mt,{headCells:t}),e.jsx(Gt,{rows:i,page:a,rowsPerPage:s,headCells:t})]})}),e.jsx(O,{rowsPerPageOptions:[10,25,100],component:"div",count:i.length,rowsPerPage:s,page:a,onPageChange:r,onRowsPerPageChange:n})]});Jt.propTypes={headCells:he.array.isRequired,rows:he.array.isRequired,page:he.number.isRequired,rowsPerPage:he.number.isRequired,handleChangePage:he.func.isRequired,handleChangeRowsPerPage:he.func.isRequired};const Kt=[{id:"name",label:"Name",minWidth:130},{id:"email",label:"Email",minWidth:140},{id:"phone",label:"Phone",minWidth:100},{id:"address",label:"Address",minWidth:150},{id:"status",label:"Status",minWidth:150},{id:"action",label:"",minWidth:10}],Zt=()=>{const a=c(),n=s(),l=r(Rt),[o,d]=t.useState(0),[u,m]=t.useState(10),[p,h]=t.useState([]),[x,f]=i.useState(!1),[g,j]=i.useState(null),v=_e({defaultValues:{name:""}});t.useEffect((()=>{n(kt())}),[n]);const{handleSubmit:b,control:_,getValues:y,reset:k}=v,w=t=>{let i=[];l&&Array.isArray(l)&&(i=((e,t)=>{const i=null==t?void 0:t.toLowerCase();return e&&Array.isArray(e)?e.filter((e=>!i||(null==e?void 0:e.name.toLowerCase().includes(i)))):[]})(l||[],null==t?void 0:t.name));const s=i.map((t=>{const i=null==t?void 0:t.institution_id,s=[];return s.push({icon:e.jsx(K,{fontSize:"small",sx:{color:"black"}}),link:i?()=>{console.log(),a(`${Ye}/${i}`)}:null},{icon:e.jsx(Z,{fontSize:"small",sx:{color:"black"}}),link:i?()=>{a(`${Ye}/${i}/edit`)}:null},{icon:e.jsx(Q,{fontSize:"small",sx:{color:"black"}}),onClick:()=>{f(!0),j(i)}}),{name:null==t?void 0:t.name,email:null==t?void 0:t.email,phone:null==t?void 0:t.phone,address:null==t?void 0:t.address,status:0===(null==t?void 0:t.status)?it[0].value:it[1].value,action:e.jsx(Yt,{submenu:s})}}));h(s)};return t.useEffect((()=>{l&&w(y())}),[l]),e.jsxs(e.Fragment,{children:[e.jsxs(xt,{children:[e.jsx(C,{variant:"h5",children:"Institutions Page"}),e.jsx(ye,{...v,children:e.jsx("form",{onSubmit:b(w),children:e.jsxs("div",{className:"flex flex-row pt-5",children:[e.jsx("div",{className:"flex-1",children:e.jsx(be,{name:"name",control:_,render:({field:{onChange:t,value:i},fieldState:{error:a}})=>e.jsx("div",{children:e.jsx(q,{name:"name",type:"text",id:"outlined-basic input-with-icon-textfield",value:i,placeholder:"Enter institution name",onChange:t,error:!!a,autoComplete:"off",fullWidth:!0,slotProps:{input:{startAdornment:e.jsx(B,{position:"start",children:e.jsx(G,{})}),endAdornment:e.jsx(B,{position:"end",children:e.jsx(J,{onClick:()=>k(),className:"cursor-pointer"})}),sx:{height:35}}},variant:"outlined"})})})}),e.jsx("div",{className:"px-3",children:e.jsx(Tt,{type:"submit",variant:"outlined",children:"Search"})}),e.jsx(Tt,{variant:"outlined",onClick:()=>a(Oe),children:"Create Institution"})]})})}),e.jsx("br",{}),e.jsx(Jt,{headCells:Kt,rows:p,page:o,rowsPerPage:u,handleChangePage:(e,t)=>{d(t)},handleChangeRowsPerPage:e=>{m(+e.target.value),d(0)}})]}),e.jsx(Ft,{atr:"organization",open:x,setOpen:f,institutionId:g,setInstitutionId:j})]})},Qt=[{institution_id:1,name:"Club 1",email:"club1@gmail.com",phone:"+1-800-123-4567",address:"123 Tech Lane, Silicon Valley, CA 94043",map_location:"https://www.google.com/maps/embed?pb=!1m14!1m8!1m3!1d3560.7065152972377!2d22.26369!3d60.455873!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x468c76f7886cb083%3A0x6d7bccbdea590557!2sL%C3%A4ntinen%20Pitk%C3%A4katu%208%2C%2020100%20Turku!5e1!3m2!1sen!2sfi!4v1730636906519!5m2!1sen!2sfi",details:"Club 1 is a tech club that offers a variety of tech-related activities and events. We have a team of experts who are passionate about technology and are dedicated to helping you learn and grow. Join us today and take your tech skills to the next level!",cover_photo:[],video_link:[],status:it[0].value},{institution_id:2,name:"Club 2",email:"club2@gmail.com",phone:"+1-800-765-4321",address:"456 Wellness Blvd, New York, NY 10001",map_location:"https://www.google.com/maps/embed?pb=!1m14!1m8!1m3!1d3560.7065152972377!2d22.26369!3d60.455873!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x468c76f7886cb083%3A0x6d7bccbdea590557!2sL%C3%A4ntinen%20Pitk%C3%A4katu%208%2C%2020100%20Turku!5e1!3m2!1sen!2sfi!4v1730636906519!5m2!1sen!2sfi",details:"Club 1 is a tech club that offers a variety of tech-related activities and events. We have a team of experts who are passionate about technology and are dedicated to helping you learn and grow. Join us today and take your tech skills to the next level!",cover_photo:[],video_link:[],status:it[1].value},{institution_id:3,name:"Club 3",email:"club3@gmail.com",phone:"+1-800-987-6543",address:"789 Commerce St, Chicago, IL 60605",map_location:"https://www.google.com/maps/embed?pb=!1m14!1m8!1m3!1d3560.7065152972377!2d22.26369!3d60.455873!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x468c76f7886cb083%3A0x6d7bccbdea590557!2sL%C3%A4ntinen%20Pitk%C3%A4katu%208%2C%2020100%20Turku!5e1!3m2!1sen!2sfi!4v1730636906519!5m2!1sen!2sfi",details:"Club 1 is a tech club that offers a variety of tech-related activities and events. We have a team of experts who are passionate about technology and are dedicated to helping you learn and grow. Join us today and take your tech skills to the next level!",cover_photo:[],video_link:[],status:it[0].value}],Xt=({handleSubmit:t,onSubmit:i,control:a,formErrors:s})=>e.jsxs("form",{onSubmit:t(i),className:"grid gap-4 py-3",children:[e.jsx(be,{name:"locker_number",control:a,render:({field:{onChange:t,value:i}})=>{var a;return e.jsx(q,{value:i,onChange:t,error:!!(null==s?void 0:s.ticketName),helperText:null==(a=null==s?void 0:s.ticketName)?void 0:a.message,required:!0,label:"Locker Number",variant:"outlined"})}}),e.jsx(be,{name:"institution",control:a,render:({field:{onChange:t,value:i}})=>{var a;return e.jsx(q,{select:!0,value:i,onChange:t,error:!!(null==s?void 0:s.institution),helperText:null==(a=null==s?void 0:s.institution)?void 0:a.message,required:!0,label:"Institution",variant:"outlined",children:Qt.map((t=>e.jsx(P,{value:t.name,children:t.name},t.institution_id)))})}}),e.jsx(be,{name:"status",control:a,render:({field:{onChange:t,value:i}})=>{var a;return e.jsx(q,{select:!0,value:i,onChange:t,error:!!(null==s?void 0:s.status),helperText:null==(a=null==s?void 0:s.status)?void 0:a.message,required:!0,label:"Locker status",variant:"outlined",children:at.map((t=>e.jsx(P,{value:t.value,children:t.value},t.value)))})}}),e.jsx(f,{type:"submit",variant:"contained",children:"Save ticket"})]});Xt.propTypes={handleSubmit:he.func.isRequired,onSubmit:he.func.isRequired,control:he.object.isRequired,formErrors:he.object,setValue:he.func.isRequired,watch:he.func.isRequired};const ei=ke().shape({locker_number:Ce().required("Locker number is required"),institution:we().required("Institution is required"),status:we().required("Locker status is required")}),ti=()=>{const t=c(),{handleSubmit:i,control:a,formState:{errors:s},reset:r}=_e({resolver:ve(ei),defaultValues:{locker_number:"",institution:"",status:""}});return e.jsxs(xt,{children:[e.jsxs("div",{className:"flex flex-row justify-between",children:[e.jsx(C,{variant:"h5",children:"Add Locker"}),e.jsx("p",{className:"italic text-cyan-600 cursor-pointer text-sm",onClick:()=>t(Be),children:"Go back Lockers page"})]}),e.jsx(Xt,{handleSubmit:i,onSubmit:e=>{console.log("Submit data:",e),r()},control:a,formErrors:s})]})},ii=[{id:1,institution_id:1,locker_number:1,status:at[0].value},{id:2,institution_id:3,locker_number:2,status:at[1].value}],ai=()=>{const{id:i}=m(),a=c(),{handleSubmit:s,control:r,formState:{errors:n},reset:l}=_e({resolver:ve(ei),defaultValues:{locker_number:"",institution:"",status:""}});t.useEffect((()=>{const e=ii.find((e=>e.id===Number(i)));if(e){const t=Qt.find((t=>t.institution_id===Number(e.institution_id)));l({locker_number:e.locker_number||"",institution:t.name||"",status:e.status||""})}}),[i,l]);return e.jsxs(xt,{children:[e.jsxs("div",{className:"flex flex-row justify-between",children:[e.jsx(C,{variant:"h5",children:"Edit locker"}),e.jsx("p",{className:"italic text-cyan-600 cursor-pointer text-sm",onClick:()=>a(Be),children:"Go back Lockers page"})]}),e.jsx(Xt,{handleSubmit:s,onSubmit:e=>{console.log("Submit data:",e)},control:r,formErrors:n})]})},si=[{id:"locker_number",label:"Locker number",minWidth:200},{id:"institution",label:"Institution",minWidth:200},{id:"status",label:"Locker status",minWidth:150},{id:"action",label:"",minWidth:10}],ri=()=>{const i=c(),[a,s]=t.useState(0),[r,n]=t.useState(10),[l,o]=t.useState([]),d=_e({defaultValues:{locker_number:"",institution:""}}),{handleSubmit:u,control:m,getValues:p,reset:h}=d,x=t=>{let a=[];ii&&Array.isArray(ii)&&(a=((e,t,i)=>{const a=null==i?void 0:i.toLowerCase(),s=t?t.toString().toLowerCase():null;return e&&Array.isArray(e)?e.filter((e=>{var t;const i=!s||(null==e?void 0:e.locker_number.toString().toLowerCase().includes(s)),r=!a||(null==(t=Qt.find((t=>t.institution_id===e.institution_id)))?void 0:t.name.toLowerCase().includes(a));return i&&r})):[]})(ii||[],null==t?void 0:t.locker_number,null==t?void 0:t.institution));const s=a.map((t=>{const a=null==t?void 0:t.id,s=[],r=Qt.find((e=>e.institution_id===Number(null==t?void 0:t.institution_id)));return s.push({icon:e.jsx(Z,{fontSize:"small",sx:{color:"black"}}),link:a?()=>{i(`${Be}/${a}/edit`)}:null},{icon:e.jsx(Q,{fontSize:"small",sx:{color:"black"}}),onClick:()=>{console.log("Delete ticket")}}),{locker_number:null==t?void 0:t.locker_number,institution:null==r?void 0:r.name,status:null==t?void 0:t.status,action:e.jsx(Yt,{submenu:s})}}));o(s)};return t.useEffect((()=>{ii&&x(p())}),[ii]),e.jsx(e.Fragment,{children:e.jsxs(xt,{children:[e.jsx(C,{variant:"h5",children:"Lockers Page"}),e.jsx(ye,{...d,children:e.jsx("form",{onSubmit:u(x),children:e.jsxs("div",{className:"pt-5 grid grid-cols-6 gap-2",children:[e.jsx(be,{name:"locker_number",control:m,render:({field:{onChange:t,value:i},fieldState:{error:a}})=>e.jsx(q,{name:"locker_number",type:"text",className:"col-span-2",value:i,placeholder:"Enter locker number",onChange:t,error:!!a,autoComplete:"off",fullWidth:!0,slotProps:{input:{startAdornment:e.jsx(B,{position:"start",children:e.jsx(G,{})}),endAdornment:e.jsx(B,{position:"end",children:e.jsx(J,{onClick:()=>h(),className:"cursor-pointer"})}),sx:{height:35}}},variant:"outlined"})}),e.jsx(be,{name:"institution",control:m,render:({field:{onChange:t,value:i},fieldState:{error:a}})=>e.jsx(q,{name:"institution",type:"text",className:"col-span-2",value:i,placeholder:"Enter institution",onChange:t,error:!!a,autoComplete:"off",fullWidth:!0,slotProps:{input:{startAdornment:e.jsx(B,{position:"start",children:e.jsx(G,{})}),endAdornment:e.jsx(B,{position:"end",children:e.jsx(J,{onClick:()=>h(),className:"cursor-pointer"})}),sx:{height:35}}},variant:"outlined"})}),e.jsx(Tt,{type:"submit",variant:"outlined",children:"Search"}),e.jsx(Tt,{variant:"outlined",onClick:()=>i(Je),children:"Create locker"})]})})}),e.jsx("br",{}),e.jsx(Jt,{headCells:si,rows:l,page:a,rowsPerPage:r,handleChangePage:(e,t)=>{s(t)},handleChangeRowsPerPage:e=>{n(+e.target.value),s(0)}})]})})},ni=x(X)((({theme:e})=>({display:"flex",flexDirection:"column",alignSelf:"center",width:"100%",padding:e.spacing(4),gap:e.spacing(2),margin:"auto",[e.breakpoints.up("sm")]:{maxWidth:"450px"},boxShadow:"hsla(220, 30%, 5%, 0.05) 0px 5px 15px 0px, hsla(220, 25%, 10%, 0.05) 0px 15px 35px -5px",...e.applyStyles("dark",{boxShadow:"hsla(220, 30%, 5%, 0.5) 0px 5px 15px 0px, hsla(220, 25%, 10%, 0.08) 0px 15px 35px -5px"})}))),li=x(ee)((({theme:e})=>({minHeight:"100%",padding:e.spacing(2),[e.breakpoints.up("sm")]:{padding:e.spacing(4)},"&::before":{content:'""',display:"block",position:"absolute",zIndex:-1,inset:0,backgroundImage:"radial-gradient(ellipse at 50% 50%, hsl(210, 100%, 97%), hsl(0, 0%, 100%))",backgroundRepeat:"no-repeat",...e.applyStyles("dark",{backgroundImage:"radial-gradient(at 50% 50%, hsla(210, 100%, 16%, 0.5), hsl(220, 30%, 5%))"})}})));function oi(){const i=c(),a=s(),[r,n]=t.useState(!1),[l,o]=t.useState(""),[d,u]=t.useState(!1),[m,p]=t.useState(""),[h,x]=t.useState(!1),[g,j]=t.useState(""),v=()=>{const e=document.getElementById("username").value,t=document.getElementById("password").value;let i=!0;return e?(n(!1),o("")):(n(!0),o("Please enter username"),i=!1),t&&bt.test(t)?(u(!1),p("")):(u(!0),p("Password must be at least 6 characters long, have at least one uppercase letter, one lowercase letter, one number, and one special character."),i=!1),i};return e.jsxs(e.Fragment,{children:[e.jsx(b,{enableColorScheme:!0}),e.jsx(li,{direction:"column",justifyContent:"space-between",children:e.jsxs(ni,{variant:"outlined",children:[e.jsx(C,{component:"h1",variant:"h4",sx:{width:"100%",fontSize:"clamp(2rem, 10vw, 2.15rem)"},children:"Sign in"}),e.jsxs(S,{component:"form",onSubmit:e=>{if(e.preventDefault(),v()){const t=new FormData(e.currentTarget),s=t.get("username"),r=t.get("password");a(dt({email:s,password:r})).unwrap().then((e=>{sessionStorage.setItem("token",e.token),i("/")})).catch((e=>{j(`Login failed. ${e.message}`)}))}},noValidate:!0,sx:{display:"flex",flexDirection:"column",width:"100%",gap:2},children:[e.jsxs(te,{children:[e.jsx(ie,{htmlFor:"username",children:"Username"}),e.jsx(q,{error:r,helperText:l,id:"username",type:"username",name:"username",placeholder:"Username",autoFocus:!0,required:!0,fullWidth:!0,variant:"outlined",color:r?"error":"primary"})]}),e.jsxs(te,{children:[e.jsx(S,{sx:{display:"flex",justifyContent:"space-between"},children:e.jsx(ie,{htmlFor:"password",children:"Password"})}),e.jsx(q,{error:d,helperText:m,name:"password",placeholder:"Password",id:"password",autoComplete:"current-password",required:!0,fullWidth:!0,variant:"outlined",color:d?"error":"primary",type:h?"text":"password",slotProps:{input:{endAdornment:e.jsx(B,{position:"end",children:e.jsx(k,{"aria-label":h?"hide the password":"display the password",onClick:()=>x((e=>!e)),edge:"end",children:h?e.jsx(ae,{}):e.jsx(se,{})})})}}})]}),g&&e.jsx(C,{color:"error",variant:"body2",children:g}),e.jsx(f,{type:"submit",fullWidth:!0,variant:"contained",children:"Sign in"})]})]})})]})}const di=()=>e.jsx("section",{className:"bg-white dark:bg-gray-900",children:e.jsx("div",{className:"py-8 px-4 mx-auto max-w-screen-xl lg:py-16 lg:px-6",children:e.jsxs("div",{className:"mx-auto max-w-screen-sm text-center",children:[e.jsx("h1",{className:"mb-4 text-7xl tracking-tight font-extrabold lg:text-9xl text-primary-600 dark:text-primary-500",children:"404"}),e.jsx("p",{className:"mb-4 text-3xl tracking-tight font-bold text-gray-900 md:text-4xl dark:text-white",children:"Something is missing."}),e.jsxs("p",{className:"mb-4 text-lg font-light text-gray-500 dark:text-gray-400",children:["Sorry, we can not find that page. You will find lots to explore on the home page."," "]}),e.jsx("a",{href:"/",className:"inline-flex text-gray-900 bg-primary-600 hover:bg-primary-800 focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:focus:ring-primary-900 my-4",children:"Back to Homepage"})]})})}),ci=ke().shape({name:we().required("Name is required"),description:we(),institution_id:Ce().typeError("Institution must be a number").required("Institution is required"),price:Ce().typeError("Price must be a number").min(0,"Price cannot be negative").required("Price is required"),capacity:Ce().typeError("Capacity must be a number").min(1,"Capacity must be at least 1").required("Capacity is required"),benefits:we(),is_regular:Ne(),date:Se().test("isValid","Invalid date",(e=>Ae(e).isValid())).when("is_regular",{is:!1,then:e=>e.required("Date is required"),otherwise:e=>e.notRequired()}),start_datetime:we().when("is_regular",{is:!0,then:e=>e.required("Start time is required").typeError("Invalid start time"),otherwise:e=>e.notRequired()}),end_datetime:we().when("is_regular",{is:!0,then:e=>e.required("End time is required").typeError("Invalid end time"),otherwise:e=>e.notRequired()})}),ui=({handleSubmit:i,onSubmit:a,control:n,formErrors:l,watch:o})=>{const d=s(),c=r(Rt);return t.useEffect((()=>{d(kt())}),[d]),e.jsxs("form",{onSubmit:i(a),className:"grid gap-4 py-3",children:[e.jsx(be,{name:"name",control:n,render:({field:{onChange:t,value:i}})=>{var a;return e.jsx(q,{value:i,onChange:t,error:!!(null==l?void 0:l.name),helperText:null==(a=null==l?void 0:l.name)?void 0:a.message,label:"Ticket Name",variant:"outlined"})}}),e.jsx(be,{name:"description",control:n,render:({field:{onChange:t,value:i}})=>e.jsx(q,{value:i,onChange:t,label:"Description",variant:"outlined",multiline:!0,rows:3})}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(be,{name:"institution_id",control:n,render:({field:{onChange:t,value:i}})=>{var a;return e.jsx(q,{select:!0,value:i||"",onChange:t,error:!!(null==l?void 0:l.institution_id),helperText:null==(a=null==l?void 0:l.institution_id)?void 0:a.message,label:"Institution",variant:"outlined",children:c.map((t=>e.jsx(P,{value:t.institution_id,children:t.name},t.institution_id)))})}}),e.jsx(be,{name:"price",control:n,render:({field:{onChange:t,value:i}})=>{var a;return e.jsx(q,{value:i,onChange:t,error:!!(null==l?void 0:l.price),helperText:null==(a=null==l?void 0:l.price)?void 0:a.message,label:"Price",variant:"outlined"})}}),e.jsx(be,{name:"capacity",control:n,render:({field:{onChange:t,value:i}})=>{var a;return e.jsx(q,{value:i,onChange:t,error:!!(null==l?void 0:l.capacity),helperText:null==(a=null==l?void 0:l.capacity)?void 0:a.message,label:"Capacity",variant:"outlined"})}})]}),e.jsx(be,{name:"benefits",control:n,render:({field:{onChange:t,value:i}})=>e.jsx(q,{value:i,onChange:t,label:"Benefits",variant:"outlined",multiline:!0,rows:3})}),e.jsx(be,{name:"is_regular",control:n,render:({field:{onChange:t,value:i}})=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(re,{checked:i||!1,onChange:e=>t(e.target.checked)}),e.jsx(C,{children:"Regular ticket"})]})}),!o("is_regular")&&e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx(be,{name:"date",control:n,render:({field:{onChange:t,value:i}})=>{var a;return e.jsx(ne,{dateAdapter:le,children:e.jsx(oe,{label:"Date",value:i,onChange:t,format:"DD/MM/YYYY",slotProps:{textField:{error:!!(null==l?void 0:l.date),helperText:null==(a=null==l?void 0:l.date)?void 0:a.message}}})})}}),e.jsx(be,{name:"start_datetime",control:n,render:({field:{onChange:t,value:i}})=>{var a;return e.jsx(ne,{dateAdapter:le,children:e.jsx(de,{label:"Start Time",value:i?Ae(i,"HH:mm:ss"):null,onChange:e=>{t(e?Ae(e).format("HH:mm:ss"):"")},format:"HH:mm:ss",slotProps:{textField:{error:!!(null==l?void 0:l.start_datetime),helperText:null==(a=null==l?void 0:l.start_datetime)?void 0:a.message}}})})}}),e.jsx(be,{name:"end_datetime",control:n,render:({field:{onChange:t,value:i}})=>{var a;return e.jsx(ne,{dateAdapter:le,children:e.jsx(de,{label:"End Time",value:i?Ae(i,"HH:mm:ss"):null,onChange:e=>{t(e?Ae(e).format("HH:mm:ss"):"")},format:"HH:mm:ss",slotProps:{textField:{error:!!(null==l?void 0:l.end_datetime),helperText:null==(a=null==l?void 0:l.end_datetime)?void 0:a.message}}})})}})]}),e.jsx(f,{type:"submit",variant:"contained",children:"Save ticket"})]})};ui.propTypes={handleSubmit:he.func.isRequired,onSubmit:he.func.isRequired,control:he.object.isRequired,formErrors:he.object,watch:he.func.isRequired};const mi=()=>{const t=c(),i=s(),{handleSubmit:a,control:r,formState:{errors:n},reset:l,watch:o}=_e({resolver:ve(ci),defaultValues:{name:"",description:"",institution_id:null,price:0,capacity:0,benefits:"",is_regular:!1,date:Ae(),start_datetime:Ae(),end_datetime:Ae()}});return e.jsxs(xt,{children:[e.jsxs("div",{className:"flex flex-row justify-between",children:[e.jsx(C,{variant:"h5",children:"Add ticket"}),e.jsx("p",{className:"italic text-cyan-600 cursor-pointer text-sm",onClick:()=>t(We),children:"Go back Tickets page"})]}),e.jsx(ui,{handleSubmit:a,onSubmit:e=>{const t={...e,institution_id:parseInt(e.institution_id,10),price:parseFloat(e.price),capacity:parseInt(e.capacity,10),is_regular:e.is_regular?1:0,date:e.is_regular?"":e.date,start_datetime:e.is_regular?"":e.start_datetime,end_datetime:e.is_regular?"":e.end_datetime};i(Lt(t)),l()},control:r,formErrors:n,watch:o})]})},pi=fe({name:"ticket",initialState:{tickets:[],loading:st,error:null,ticket:{id:"",name:"",description:"",institution_id:"",price:"",capacity:"",benefits:"",is_regular:"",date:"",start_datetime:"",end_datetime:""}},reducers:{},extraReducers:e=>{e.addCase(Wt.pending,(e=>{e.loading=rt})).addCase(Wt.fulfilled,((e,t)=>{e.loading=nt,e.tickets=t.payload.map((e=>({id:e.ticket_id,name:e.name,description:e.description,institution_id:e.institution_id,price:e.price,capacity:e.capacity,benefits:e.benefits,is_regular:e.is_regular,date:e.date,start_datetime:e.start_datetime,end_datetime:e.end_datetime}))),e.error=null})).addCase(Wt.rejected,((e,t)=>{e.loading=lt,e.tickets=[],e.error=t.error.message})).addCase(Dt.pending,(e=>{e.loading=rt})).addCase(Dt.fulfilled,((e,t)=>{e.loading=nt,e.ticket={...e.ticket,...t.payload},e.error=null})).addCase(Dt.rejected,((e,t)=>{e.loading=lt,e.error=t.error.message})).addCase(Vt.pending,(e=>{e.loading=rt})).addCase(Vt.fulfilled,((e,t)=>{e.loading=nt,e.tickets=e.tickets.map((e=>e.id===t.payload.ticket_id?t.payload:e)),e.error=null})).addCase(Vt.rejected,((e,t)=>{e.loading=lt,e.error=t.error.message})).addCase(Lt.pending,(e=>{e.loading=rt})).addCase(Lt.fulfilled,((e,t)=>{e.loading=nt,e.tickets.push(t.payload),e.error=null})).addCase(Lt.rejected,((e,t)=>{e.loading=lt,e.error=t.error.message})).addCase($t.pending,(e=>{e.loading=rt})).addCase($t.fulfilled,((e,t)=>{e.loading=nt,e.tickets=e.tickets.filter((e=>e.id!==t.payload.ticket_id)),e.error=null})).addCase($t.rejected,((e,t)=>{e.loading=lt,e.error=t.error.message}))}}).reducer,hi=e=>e.ticket.tickets,xi=e=>e.ticket.ticket,fi=()=>{const{id:i}=m(),a=c(),n=s(),l=r(xi);t.useEffect((()=>{n(Dt(i))}),[n,i]);const{handleSubmit:o,control:d,formState:{errors:u},reset:p,watch:h}=_e({resolver:ve(ci),defaultValues:{name:"",description:"",institution_id:"",price:0,capacity:0,benefits:"",is_regular:!1,date:Ae(),start_datetime:Ae(),end_datetime:Ae()}});t.useEffect((()=>{l&&p({name:l.name||"",description:l.description||"",institution_id:l.institution_id||null,price:l.price||0,capacity:l.capacity||0,benefits:l.benefits||"",is_regular:1===l.is_regular,date:l.is_regular?"":Ae(l.date),start_datetime:l.is_regular?"":l.start_datetime,end_datetime:l.is_regular?"":l.end_datetime})}),[l]);return e.jsxs(xt,{children:[e.jsxs("div",{className:"flex flex-row justify-between",children:[e.jsx(C,{variant:"h5",children:"Edit ticket"}),e.jsx("p",{className:"italic text-cyan-600 cursor-pointer text-sm",onClick:()=>a(We),children:"Go back Tickets page"})]}),e.jsx(ui,{handleSubmit:o,onSubmit:e=>{const t={...e,institution_id:parseInt(e.institution_id,10),price:parseFloat(e.price),capacity:parseInt(e.capacity,10),is_regular:e.is_regular?1:0,date:e.is_regular?"":e.date,start_datetime:e.is_regular?"":e.start_datetime,end_datetime:e.is_regular?"":e.end_datetime};n(Vt({ticket_id:i,ticketData:t}))},control:d,formErrors:u,watch:h})]})},gi=()=>{const i=c(),a=s(),{id:n}=m(),l=r(xi),o=r(It);return t.useEffect((()=>{a(Dt(n))}),[a,n]),t.useEffect((()=>{l&&l.institution_id&&a(wt(l.institution_id))}),[a,l]),e.jsxs(xt,{children:[e.jsxs("div",{className:"flex flex-row justify-between",children:[e.jsx(C,{variant:"h5",children:"Ticket details"}),e.jsxs("div",{className:"flex flex-row",children:[e.jsx("p",{className:"italic text-cyan-600 cursor-pointer text-sm",onClick:()=>i(We),children:"Go back Tickets page"}),e.jsx("p",{className:"px-3",children:" | "}),e.jsx("p",{className:"italic text-cyan-600 cursor-pointer text-sm",onClick:()=>i(`${We}/${n}/edit`),children:"Edit"})]})]}),e.jsxs("div",{className:"grid gap-4 py-3",children:[e.jsxs("div",{className:"flex flex-wrap",children:[e.jsx("p",{className:"font-bold",children:"Ticket name:"}),e.jsx("p",{className:"px-2",children:l.name})]}),e.jsxs("div",{className:"flex flex-wrap",children:[e.jsx("p",{className:"font-bold",children:"Ticket description:"}),e.jsx("p",{className:"px-2",children:l.description})]}),e.jsxs("div",{className:"flex flex-wrap",children:[e.jsx("p",{className:"font-bold",children:"Institution:"}),e.jsx("p",{className:"px-2",children:o.name})]}),e.jsxs("div",{className:"flex flex-wrap",children:[e.jsx("p",{className:"font-bold",children:"Ticket price:"}),e.jsx("p",{className:"px-2",children:l.price})]}),e.jsxs("div",{className:"flex flex-wrap",children:[e.jsx("p",{className:"font-bold",children:"Capacity:"}),e.jsx("p",{className:"px-2",children:l.capacity})]}),e.jsxs("div",{className:"flex flex-wrap",children:[e.jsx("p",{className:"font-bold",children:"Benefits:"}),e.jsx("p",{className:"px-2",children:l.benefits})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("p",{className:"font-bold",children:"Regular ticket:"}),e.jsx(re,{checked:1===l.is_regular,disabled:!0,className:""})]}),!l.is_regular&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-wrap",children:[e.jsx("p",{className:"font-bold",children:"Date:"}),e.jsx("p",{className:"px-2",children:Ae(l.date).format("DD-MM-YYYY")})]}),e.jsxs("div",{className:"flex flex-wrap",children:[e.jsx("p",{className:"font-bold",children:"Start time:"}),e.jsx("p",{className:"px-2",children:l.start_datetime})]}),e.jsxs("div",{className:"flex flex-wrap",children:[e.jsx("p",{className:"font-bold",children:"End time:"}),e.jsx("p",{className:"px-2",children:l.end_datetime})]})]})]})]})},ji=[{id:"name",label:"Name",minWidth:250},{id:"institution",label:"Institution",minWidth:140},{id:"price",label:"Price",minWidth:100},{id:"capacity",label:"Capacity",minWidth:100},{id:"date",label:"Date",minWidth:120},{id:"start_datetime",label:"Time start",minWidth:120},{id:"end_datetime",label:"End time",minWidth:120},{id:"action",label:"",minWidth:10}],vi=()=>{const a=c(),n=s(),l=r(hi),o=r(Rt),[d,u]=t.useState(0),[m,p]=t.useState(10),[h,x]=t.useState([]),[f,g]=i.useState(!1),[j,v]=i.useState(null);t.useEffect((()=>{n(Wt())}),[n]),t.useEffect((()=>{l&&n(kt())}),[n,l]);const b=_e({defaultValues:{name:""}}),{handleSubmit:_,control:y,getValues:k,reset:w}=b,N=t=>{let i=[];l&&Array.isArray(l)&&(i=((e,t)=>{const i=null==t?void 0:t.toLowerCase();return e&&Array.isArray(e)?e.filter((e=>!i||(null==e?void 0:e.name.toLowerCase().includes(i)))):[]})(l||[],null==t?void 0:t.name));const s=i.map((t=>{const i=null==t?void 0:t.id,s=[],r=o.find((e=>e.institution_id===Number(null==t?void 0:t.institution_id)));return s.push({icon:e.jsx(K,{fontSize:"small",sx:{color:"black"}}),link:i?()=>{a(`${We}/${i}`)}:null},{icon:e.jsx(Z,{fontSize:"small",sx:{color:"black"}}),link:i?()=>{a(`${We}/${i}/edit`)}:null},{icon:e.jsx(Q,{fontSize:"small",sx:{color:"black"}}),onClick:()=>{g(!0),v(i)}}),{name:null==t?void 0:t.name,institution:null==r?void 0:r.name,price:null==t?void 0:t.price,capacity:null==t?void 0:t.capacity,date:(null==t?void 0:t.is_regular)?"Regular event":Ae(null==t?void 0:t.date).format("DD/MM/YYYY"),start_datetime:(null==t?void 0:t.is_regular)?"Regular event":null==t?void 0:t.start_datetime,end_datetime:(null==t?void 0:t.is_regular)?"Regular event":null==t?void 0:t.end_datetime,action:e.jsx(Yt,{submenu:s})}}));x(s)};return t.useEffect((()=>{l&&N(k())}),[l]),e.jsxs(e.Fragment,{children:[e.jsxs(xt,{children:[e.jsx(C,{variant:"h5",children:"Tickets Page"}),e.jsx(ye,{...b,children:e.jsx("form",{onSubmit:_(N),children:e.jsxs("div",{className:"flex flex-row pt-5",children:[e.jsx("div",{className:"flex-1",children:e.jsx(be,{name:"name",control:y,render:({field:{onChange:t,value:i},fieldState:{error:a}})=>e.jsx("div",{children:e.jsx(q,{name:"name",type:"text",id:"outlined-basic input-with-icon-textfield",value:i,placeholder:"Enter ticket name",onChange:t,error:!!a,autoComplete:"off",fullWidth:!0,slotProps:{input:{startAdornment:e.jsx(B,{position:"start",children:e.jsx(G,{})}),endAdornment:e.jsx(B,{position:"end",children:e.jsx(J,{onClick:()=>w(),className:"cursor-pointer"})}),sx:{height:35}}},variant:"outlined"})})})}),e.jsx("div",{className:"px-3",children:e.jsx(Tt,{type:"submit",variant:"outlined",children:"Search"})}),e.jsx(Tt,{variant:"outlined",onClick:()=>a(Le),children:"Create ticket"})]})})}),e.jsx("br",{}),e.jsx(Jt,{headCells:ji,rows:h,page:d,rowsPerPage:m,handleChangePage:(e,t)=>{u(t)},handleChangeRowsPerPage:e=>{p(+e.target.value),u(0)}})]}),e.jsx(Ft,{atr:"ticket",open:f,setOpen:g,ticketId:j,setTicketId:v})]})},bi=({handleSubmit:t,onSubmit:i,control:a,formErrors:s,setValue:r,watch:n})=>{const l=n("profile_pic"),o=et["image"].map((e=>`.${e}`)).toString();return e.jsxs("form",{onSubmit:t(i),className:"grid gap-4 py-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(be,{name:"name",control:a,render:({field:{onChange:t,value:i}})=>{var a;return e.jsx(q,{value:i,onChange:t,error:!!(null==s?void 0:s.name),helperText:null==(a=null==s?void 0:s.name)?void 0:a.message,label:"User Name",variant:"outlined"})}}),e.jsx(be,{name:"email",control:a,render:({field:{onChange:t,value:i}})=>{var a;return e.jsx(q,{value:i,onChange:t,error:!!(null==s?void 0:s.email),helperText:null==(a=null==s?void 0:s.email)?void 0:a.message,label:"Email",variant:"outlined"})}})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(be,{name:"phone",control:a,render:({field:{onChange:t,value:i}})=>{var a;return e.jsx(q,{value:i,onChange:t,error:!!(null==s?void 0:s.phone),helperText:null==(a=null==s?void 0:s.phone)?void 0:a.message,label:"Phone",variant:"outlined"})}}),e.jsx(be,{name:"date_of_birth",control:a,defaultValue:Ae(),render:({field:{onChange:t,value:i}})=>{var a;return e.jsx(ne,{dateAdapter:le,children:e.jsx(oe,{label:"DOB",format:"DD/MM/YYYY",value:i||Ae(),onChange:t,slotProps:{textField:{error:!!(null==s?void 0:s.date_of_birth),helperText:null==(a=null==s?void 0:s.date_of_birth)?void 0:a.message}}})})}})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(be,{name:"role",control:a,render:({field:{onChange:t,value:i}})=>{var a;return e.jsx(q,{select:!0,value:i,onChange:t,error:!!(null==s?void 0:s.role),helperText:null==(a=null==s?void 0:s.role)?void 0:a.message,label:"Role",variant:"outlined",children:tt.map((t=>e.jsx(P,{value:t.id,children:t.value},t.id)))})}}),e.jsx(be,{name:"institution_id",control:a,render:({field:{onChange:t,value:i}})=>{var a;return e.jsx(q,{select:!0,value:i,onChange:t,error:!!(null==s?void 0:s.institution_id),helperText:null==(a=null==s?void 0:s.institution_id)?void 0:a.message,label:"Institution",variant:"outlined",children:Qt.map((t=>e.jsx(P,{value:t.institution_id,children:t.name},t.institution_id)))})}})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(be,{name:"password",control:a,render:({field:{onChange:t,value:i}})=>{var a;return e.jsx(q,{value:i,onChange:t,error:!!(null==s?void 0:s.password),helperText:null==(a=null==s?void 0:s.password)?void 0:a.message,label:"Password",variant:"outlined"})}}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(C,{children:"Social ID:"}),e.jsx(be,{name:"is_social",control:a,render:({field:{onChange:t,value:i}})=>e.jsx(re,{checked:i,onChange:e=>t(e.target.checked)})}),n("is_social")&&e.jsx(be,{name:"social_uuid",control:a,render:({field:{onChange:t,value:i}})=>{var a;return e.jsx(q,{value:i,onChange:t,error:!!(null==s?void 0:s.social_uuid),helperText:null==(a=null==s?void 0:s.social_uuid)?void 0:a.message,label:"Social UUID",variant:"outlined"})}})]})]}),e.jsxs("div",{className:"grid gap-2",children:[e.jsx("label",{className:"button label",htmlFor:"images",children:e.jsxs("span",{children:["Upload profile picture (Validate file: [",o,"])"]})}),e.jsx(be,{name:"profile_pic",control:a,render:({field:t})=>e.jsx("input",{id:"images",type:"file",accept:o,multiple:!0,onChange:e=>{const i=Array.from(e.target.files);t.onChange(i),r("profile_pic",i)}})}),l&&l.length>0&&e.jsx(gt,{className:{margin:"auto"},width:300,height:"auto",files:l})]}),e.jsx(f,{type:"submit",variant:"contained",children:"Save user"})]})};bi.propTypes={handleSubmit:he.func.isRequired,onSubmit:he.func.isRequired,control:he.object.isRequired,formErrors:he.object,setValue:he.func.isRequired,watch:he.func.isRequired};const _i=ke().shape({name:we().required("Name is required"),email:we().email().required("Email is required"),phone:we().required("Phone is required"),date_of_birth:Se().required("Date of birth is required"),password:we().required("Password is required"),role:Ce().required("Role is required"),institution_id:Ce().required("Institution is required"),is_social:Ne(),social_uuid:we().when("is_social",{is:!0,then:we().required("Social UUID is required")}),profile_pic:qe().of(Pe().test("is-valid-type","Not a valid image type",(e=>{return t=e&&e.name.toLowerCase(),i="image",t&&et[i].indexOf(t.split(".").pop())>-1;var t,i})).test("is-valid-size","Max allowed size is 100KB",(e=>e&&e.size<=102400)))}),yi=xe("user/getUserList",(async(e,{rejectWithValue:t})=>{try{return(await ot.get("/api/v1/users/list")).data}catch(i){if(!i.response)throw i;return t(i.response.data)}})),ki=xe("user/createUser",(async(e,{rejectWithValue:t})=>{try{return(await ot.post("/api/v1/users/create-user",e)).data}catch(i){if(!i.response)throw i;return t(i.response.data)}})),wi=()=>{const t=c(),i=s(),{handleSubmit:a,control:r,formState:{errors:n},reset:l,setValue:o,watch:d}=_e({resolver:ve(_i),defaultValues:{name:"",email:"",phone:"",date_of_birth:Ae(),password:"",role:"",institution_id:null,is_social:!1,social_uuid:"",profile_pic:[]}});return e.jsxs(xt,{children:[e.jsxs("div",{className:"flex flex-row justify-between",children:[e.jsx(C,{variant:"h5",children:"Add user"}),e.jsx("p",{className:"italic text-cyan-600 cursor-pointer text-sm",onClick:()=>t($e),children:"Go back Users page"})]}),e.jsx(bi,{handleSubmit:a,onSubmit:e=>{const t=new FormData;t.append("name",e.name),t.append("email",e.email),t.append("phone",e.phone),t.append("date_of_birth",e.date_of_birth.toISOString()),t.append("password",e.password),t.append("role",parseInt(e.role,10)),t.append("institution_id",parseInt(e.institution_id,10)),t.append("is_social",e.is_social?1:0),t.append("social_uuid",e.social_uuid),e.images.forEach((e=>{t.append("images",e)})),i(ki(t)),l()},control:r,formErrors:n,setValue:o,watch:d})]})},Ci=[{user_id:1,name:"John Doe",email:"JohnDoe@gmail.com",phone:"1234567890",date_of_birth:"01/01/2000",password:"password",role:tt[1].value,institution_id:1,is_social:!1,social_uuid:"",profile_pic:[]},{user_id:2,name:"Jane Doe",email:"JaneDoe@gmail.com",phone:"0987654321",date_of_birth:"02/02/2000",password:"password",role:tt[0].value,institution_id:"",is_social:!0,social_uuid:"1232434",profile_pic:[]}],Ni=()=>{const{id:i}=m(),a=c(),{handleSubmit:s,control:r,formState:{errors:n},reset:l,setValue:o,watch:d}=_e({resolver:ve(_i),defaultValues:{name:"",email:"",phone:"",date_of_birth:Ae(),password:"",role:"",institution:"",is_social:!1,social_uuid:"",profile_pic:[]}});t.useEffect((()=>{const e=Ci.find((e=>e.user_id===Number(i)));if(e){const t=Qt.find((t=>t.institution_id===Number(e.institution_id)));l({name:e.name,email:e.email,phone:e.phone,date_of_birth:Ae(e.date_of_birth)||Ae(),password:e.password,role:e.role,institution:t?t.name:"",is_social:e.is_social,social_uuid:e.social_uuid,profile_pic:e.profile_pic||[]})}}),[i,l]);return e.jsxs(xt,{children:[e.jsxs("div",{className:"flex flex-row justify-between",children:[e.jsx(C,{variant:"h5",children:"Edit user"}),e.jsx("p",{className:"italic text-cyan-600 cursor-pointer text-sm",onClick:()=>a($e),children:"Go back Users page"})]}),e.jsx(bi,{handleSubmit:s,onSubmit:e=>{console.log("Submit data:",e)},control:r,formErrors:n,setValue:o,watch:d})]})},Si=()=>{const t=c(),{id:i}=m(),a=Ci.find((e=>e.user_id===Number(i))),s=Qt.find((e=>e.institution_id===a.institution_id));return e.jsxs(xt,{children:[e.jsxs("div",{className:"flex flex-row justify-between",children:[e.jsx(C,{variant:"h5",children:"User details"}),e.jsxs("div",{className:"flex flex-row",children:[e.jsx("p",{className:"italic text-cyan-600 cursor-pointer text-sm",onClick:()=>t($e),children:"Go back Users page"}),e.jsx("p",{className:"px-3",children:" | "}),e.jsx("p",{className:"italic text-cyan-600 cursor-pointer text-sm",onClick:()=>t(`${$e}/${i}/edit`),children:"Edit"})]})]}),e.jsxs("div",{className:"grid gap-4 py-3",children:[e.jsxs("div",{className:"flex flex-wrap",children:[e.jsx("p",{className:"font-bold",children:"User name:"}),e.jsx("p",{className:"px-2",children:a.name})]}),e.jsxs("div",{className:"flex flex-wrap",children:[e.jsx("p",{className:"font-bold",children:"Password:"}),e.jsx("p",{className:"px-2",children:a.password})]}),e.jsxs("div",{className:"flex flex-wrap",children:[e.jsx("p",{className:"font-bold",children:"Email:"}),e.jsx("p",{className:"px-2",children:a.email})]}),e.jsxs("div",{className:"flex flex-wrap",children:[e.jsx("p",{className:"font-bold",children:"Phone:"}),e.jsx("p",{className:"px-2",children:a.phone})]}),e.jsxs("div",{className:"flex flex-wrap",children:[e.jsx("p",{className:"font-bold",children:"DOB:"}),e.jsx("p",{className:"px-2",children:Ae(a.date_of_birth).format("DD/MM/YYYY")})]}),e.jsxs("div",{className:"flex flex-wrap",children:[e.jsx("p",{className:"font-bold",children:"Role:"}),e.jsx("p",{className:"px-2",children:a.role})]}),e.jsxs("div",{className:"flex flex-wrap",children:[e.jsx("p",{className:"font-bold",children:"Institution:"}),e.jsx("p",{className:"px-2",children:s&&s.name})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("p",{className:"font-bold",children:"Social ID:"}),a.is_social?e.jsx("p",{className:"px-2",children:a.social_uuid}):e.jsx("p",{className:"px-2",children:"No Social ID"})]}),e.jsxs("div",{className:"flex flex-wrap",children:[e.jsx("p",{className:"font-bold",children:"Profile picture:"}),e.jsx("div",{className:"px-2",children:a.profile_pic&&a.profile_pic.length>0&&e.jsx(gt,{className:{margin:"auto"},width:300,height:"auto",files:a.profile_pic})})]})]})]})},qi=fe({name:"user",initialState:{users:[],loading:st,error:null},reducers:{},extraReducers:e=>{e.addCase(yi.pending,(e=>{e.loading=rt})).addCase(yi.fulfilled,((e,t)=>{e.loading=nt,e.users=t.payload.users.map((e=>({...e,date_of_birth:new Date(e.date_of_birth).toDateString()}))),e.error=null})).addCase(yi.rejected,((e,t)=>{e.loading=lt,e.tickets=[],e.error=t.error.message})).addCase(ki.pending,(e=>{e.loading=rt})).addCase(ki.fulfilled,((e,t)=>{e.loading=nt,e.tickets.push(t.payload),e.error=null})).addCase(ki.rejected,((e,t)=>{e.loading=lt,e.error=t.error.message}))}}).reducer,Pi=e=>e.user.users,Ri=[{id:"name",label:"User name",minWidth:250},{id:"email",label:"Email",minWidth:140},{id:"phone",label:"Phone",minWidth:100},{id:"date_of_birth",label:"DOB",minWidth:100},{id:"role",label:"Role",minWidth:150},{id:"institution",label:"Institution",minWidth:150},{id:"action",label:"",minWidth:10}],Ii=()=>{const i=c(),a=s(),n=r(Rt),l=r(Pi),[o,d]=t.useState(0),[u,m]=t.useState(10),[p,h]=t.useState([]);t.useEffect((()=>{a(yi())}),[a]),t.useEffect((()=>{l&&a(kt())}),[a,l]);const x=_e({defaultValues:{name:""}}),{handleSubmit:f,control:g,getValues:j,reset:v}=x,b=t=>{let a=[];l&&Array.isArray(l)&&(a=((e,t)=>{const i=null==t?void 0:t.toLowerCase();return e&&Array.isArray(e)?e.filter((e=>!i||(null==e?void 0:e.name.toLowerCase().includes(i)))):[]})(l||[],null==t?void 0:t.name));const s=a.map((t=>{const a=null==t?void 0:t.user_id,s=[],r=n.find((e=>e.institution_id===Number(null==t?void 0:t.institution_id)));return s.push({icon:e.jsx(K,{fontSize:"small",sx:{color:"black"}}),link:a?()=>{i(`${$e}/${a}`)}:null},{icon:e.jsx(Z,{fontSize:"small",sx:{color:"black"}}),link:a?()=>{i(`${$e}/${a}/edit`)}:null},{icon:e.jsx(Q,{fontSize:"small",sx:{color:"black"}}),onClick:()=>{console.log("Delete ticket")}}),{name:null==t?void 0:t.name,email:null==t?void 0:t.email,phone:null==t?void 0:t.phone,date_of_birth:Ae(null==t?void 0:t.date_of_birth).format("DD/MM/YYYY"),role:null==t?void 0:t.role,institution:null==r?void 0:r.name,action:e.jsx(Yt,{submenu:s})}}));h(s)};return t.useEffect((()=>{l&&b(j())}),[l]),e.jsx(e.Fragment,{children:e.jsxs(xt,{children:[e.jsx(C,{variant:"h5",children:"Users Page"}),e.jsx(ye,{...x,children:e.jsx("form",{onSubmit:f(b),children:e.jsxs("div",{className:"flex flex-row pt-5",children:[e.jsx("div",{className:"flex-1",children:e.jsx(be,{name:"name",control:g,render:({field:{onChange:t,value:i},fieldState:{error:a}})=>e.jsx("div",{children:e.jsx(q,{name:"name",type:"text",id:"outlined-basic input-with-icon-textfield",value:i,placeholder:"Enter user name",onChange:t,error:!!a,autoComplete:"off",fullWidth:!0,slotProps:{input:{startAdornment:e.jsx(B,{position:"start",children:e.jsx(G,{})}),endAdornment:e.jsx(B,{position:"end",children:e.jsx(J,{onClick:()=>v(),className:"cursor-pointer"})}),sx:{height:35}}},variant:"outlined"})})})}),e.jsx("div",{className:"px-3",children:e.jsx(Tt,{type:"submit",variant:"outlined",children:"Search"})}),e.jsx(Tt,{variant:"outlined",onClick:()=>i(ze),children:"Create users"})]})})}),e.jsx("br",{}),e.jsx(Jt,{headCells:Ri,rows:p,page:o,rowsPerPage:u,handleChangePage:(e,t)=>{d(t)},handleChangeRowsPerPage:e=>{m(+e.target.value),d(0)}})]})})},Ai=p([{path:Ee,element:e.jsx(oi,{})},{element:e.jsx(Ze,{}),children:[{path:Te,element:e.jsx(ft,{})},{path:$e,element:e.jsx(Ii,{})},{path:Fe,element:e.jsx(Si,{})},{path:Ue,element:e.jsx(Ni,{})},{path:ze,element:e.jsx(wi,{})},{path:We,element:e.jsx(vi,{})},{path:De,element:e.jsx(gi,{})},{path:Ve,element:e.jsx(fi,{})},{path:Le,element:e.jsx(mi,{})},{path:Ye,element:e.jsx(Zt,{})},{path:He,element:e.jsx(Et,{})},{path:Me,element:e.jsx(At,{})},{path:Oe,element:e.jsx(qt,{})},{path:Be,element:e.jsx(ri,{})},{path:Je,element:e.jsx(ti,{})},{path:Ge,element:e.jsx(ai,{})}]},{path:"*",element:e.jsx(di,{})},{path:Ke,element:e.jsx(Qe,{})}]),Ei=ce({shadows:ue.map((()=>"none")),palette:{primary:{main:"#222831"}},typography:{},breakpoints:{values:{xs:0,sm:576,md:768,lg:1440,xl:1536}},components:{}}),Ti=t.createContext(null),Wi=({children:t})=>e.jsx(Ti.Provider,{value:{isAllowedTo:(e,t)=>t.includes(e)},children:t});function Di(){return e.jsx(Wi,{children:e.jsx(me,{theme:Ei,children:e.jsx(t.Suspense,{fallback:e.jsx(pe,{}),children:e.jsx(h,{router:Ai})})})})}Wi.propTypes={children:he.node.isRequired};const Vi=ge({reducer:{auth:mt,ticket:pi,institution:Pt,user:qi}});a(document.getElementById("root")).render(e.jsx(t.StrictMode,{children:e.jsx(n,{store:Vi,children:e.jsx(Di,{})})}));
